<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>F1 Reaction Test</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0c0c0c;
            color: white;
            text-align: center;
            padding-top: 20px;
            user-select: none;
        }

        h1 { margin-bottom: 10px; }
        p { opacity: 0.8; }

        .f1-start {
            width: 260px;
            margin: 40px auto;
            padding: 20px;
            background: #111;
            border-radius: 15px;
            box-shadow: 0 0 30px #000 inset;
        }

        .columns {
            display: flex;
            justify-content: center;
            gap: 8px;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .light {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #300;
            transition: background 0.15s, box-shadow 0.15s;
            box-shadow: 0 0 25px #000 inset;
        }

        .light.on {
            background: red;
            box-shadow: 0 0 25px red, 0 0 10px red inset;
        }

        button {
            padding: 15px 40px;
            font-size: 22px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 20px;
            color: white;
            transition: 0.2s;
        }

        #startBtn { background: #007bff; }
        #startBtn:hover { background: #0064d6; }

        #stopBtn { background: #28a745; display: none; }
        #stopBtn:hover { background: #1e8a36; }

        #result {
            font-size: 30px;
            margin-top: 20px;
            line-height: 1.4;
        }
    </style>
</head>
<body>

<h1>–¢–µ—Å—Ç —Ä–µ–∞–∫—Ü–∏–∏ –≥–æ–Ω—â–∏–∫–∞ –§–æ—Ä–º—É–ª—ã-1</h1>
<p>–ñ–¥–∏ –ø–æ–∫–∞ –æ–≥–Ω–∏ –ø–æ–≥–∞—Å–Ω—É—Ç –∏ –Ω–∞–∂–º–∏ STOP –∫–∞–∫ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ</p>

<div class="f1-start">
    <div class="columns" id="columns"></div>
</div>

<button id="startBtn">START</button>
<button id="stopBtn">STOP</button>

<div id="result"></div>

<script>
    let columns = [];
    let timerStarted = false;
    let startTime = 0;

    function createLights() {
        const container = document.getElementById("columns");
        container.innerHTML = "";
        columns = [];

        for (let i = 0; i < 5; i++) {
            const col = document.createElement("div");
            col.classList.add("column");

            const lights = [];
            for (let j = 0; j < 3; j++) {
                const light = document.createElement("div");
                light.classList.add("light");
                col.appendChild(light);
                lights.push(light);
            }

            container.appendChild(col);
            columns.push(lights);
        }
    }

    createLights();

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    async function start() {
        document.getElementById("result").innerText = "";
        document.getElementById("startBtn").style.display = "none";
        document.getElementById("stopBtn").style.display = "inline-block";

        timerStarted = false;
        createLights();

        // –ó–∞–∂–∏–≥–∞–Ω–∏–µ –æ–≥–Ω–µ–π (–∫–∞–∫ –≤ F1)
        for (let col = 0; col < 5; col++) {
            for (let light of columns[col]) {
                light.classList.add("on");
            }
            await sleep(700);
        }

        // –°–ª—É—á–∞–π–Ω–∞—è –ø–∞—É–∑–∞
        await sleep(Math.random() * 2000 + 1500);

        // –°—Ç–∞—Ä—Ç ‚Äî –æ–≥–Ω–∏ –≥–∞—Å–Ω—É—Ç
        for (let col of columns) {
            for (let light of col) light.classList.remove("on");
        }

        timerStarted = true;
        startTime = performance.now();
    }

    function stop() {
        if (!timerStarted) {
            document.getElementById("result").innerText = "‚ùå –§–∞–ª—å—Å—Ç–∞—Ä—Ç!";
            reset();
            return;
        }

        const reaction = performance.now() - startTime;

        let level = "";
        let racer = "";

        if (reaction <= 200) {
            level = "üèÜ –≠–ª–∏—Ç–∞ –§–æ—Ä–º—É–ª—ã-1";
            racer = "–õ—å—é–∏—Å –•—ç–º–∏–ª—Ç–æ–Ω";
        } else if (reaction <= 250) {
            level = "üî• –ß–µ–º–ø–∏–æ–Ω—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å";
            racer = "–ú–∞–∫—Å –§–µ—Ä—Å—Ç–∞–ø–ø–µ–Ω";
        } else if (reaction <= 300) {
            level = "‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ";
            racer = "–®–∞—Ä–ª—å –õ–µ–∫–ª–µ—Ä";
        } else if (reaction <= 350) {
            level = "üôÇ –•–æ—Ä–æ—à–∞—è —Ä–µ–∞–∫—Ü–∏—è";
            racer = "–ë—ã—Å—Ç—Ä—ã–π –ª—é–±–∏—Ç–µ–ª—å";
        } else if (reaction <= 450) {
            level = "üü¶ –ù–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å";
            racer = "–ù–æ–≤–∏—á–æ–∫";
        } else {
            level = "üê¢ –ú–µ–¥–ª–µ–Ω–Ω–æ";
            racer = "–ù—É–∂–Ω—ã —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏";
        }

        document.getElementById("result").innerHTML = `
            ‚è± <b>${reaction.toFixed(0)} –º—Å</b><br>
            <span>${level}</span><br>
            <b>${racer}</b>
        `;

        reset();
    }

    function reset() {
        document.getElementById("startBtn").style.display = "inline-block";
        document.getElementById("stopBtn").style.display = "none";
    }

    document.getElementById("startBtn").addEventListener("click", start);
    document.getElementById("stopBtn").addEventListener("click", stop);
</script>

</body>
</html>
